pivot_wider(Origin, SiO2)
pivot_wider(initial_data_t, names_from=Origin, values_from=SiO2)
initial_data_t
as_tibble(initial_data_t)
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(initial_data_t[-1,])
pivot_wider(initial_data_t, names_from=Origin, values_from=SiO2)
test = pivot_wider(initial_data_t, names_from=Origin, values_from=SiO2)
View(test)
initial_data_t
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(initial_data_t[-1,])
initial_data_t[['Origin']]
initial_data_t['Origin']
initial_data_t['Origin', 'SiO2']
initial_data_t[c('Origin', 'SiO2')]
initial_data_t[c('Origin', 'SiO2')] %>%
pivot_wider(Origin, SiO2)
initial_data_t[c('Sample','Origin', 'SiO2')] %>%
pivot_wider(Origin, SiO2)
View(initial_data_t)
View(initial_data)
initial_data_t <- t(initial_data)
View(initial_data_t)
?t
initial_data_t <- t(initial_data)
rownames(initial_data)
initial_data[1,]
initial_data[1,]
initial_data[2,]
initial_data_t[1,]
initial_data_t[2,]
initial_data_t[,1]
initial_data_t[,0]
initial_data_t[0,]
initial_data_t[,0]
initial_data_t[,0]
cbind(nms = names(initial_data), t(initial_data))
names(initial_data)
names(initial_data)
as_tibble(cbind(Sample = names(initial_data), t(initial_data)))
as_tibble(cbind(Sample = names(initial_data), t(initial_data)[1,]))
as_tibble(cbind(Sample = names(initial_data), t(initial_data)[-1,]))
as_tibble(cbind(Sample = names(initial_data), t(initial_data)))
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data), initial_data_t))
initial_data_t
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data), initial_data_t[-1,]))
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
as_tibble(cbind(Sample = names(initial_data), initial_data_t[-1,]))
as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
piwot_wider(initial_data_t, Origin, SiO2)
pivot_wider(initial_data_t, Origin, SiO2)
initial_data_t
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
initial_data_t
pivot_wider(initial_data_t, Origin, SiO2)
pivot_wider(initial_data_t, names_from=Origin, values_from=SiO2)
pivot_wider(initial_data_t, names_from=Origin, values_from=SiO2, values_fn=min)
pivot_wider(initial_data_t[c('Origin', 'SiO2')], names_from=Origin, values_from=SiO2, values_fn=min)
pivot_wider(initial_data_t[c('Sample', 'Origin', 'SiO2')], names_from=Origin, values_from=SiO2, values_fn=min)
initial_data_t %>%
count()
initial_data_t %>%
count()
library(dplyr)
initial_data_t %>%
count()
initial_data_t %>%
count(Origin)
dim(initial_data)
?select
select(initial_data_t, SiO2)
knitr::opts_chunk$set(echo = TRUE)
```{r}
initial_data_t %>%
select(SiO2)
?dplyr::filter
View(initial_data_t)
initial_data_t
View(initial_data_t)
initial_data_t[-c('Sample', 'Origin', 'Reference')]
initial_data_t[c('Sample', 'Origin', 'Reference')]
initial_data_t[~c('Sample', 'Origin', 'Reference')]
initial_data_t[~c('Sample', 'Origin', 'Reference')]
initial_data_t[!c('Sample', 'Origin', 'Reference')]
initial_data_t[!!c('Sample', 'Origin', 'Reference')]
initial_data %>%
select(c('Sample', 'Origin', 'Reference'))
initial_data_t %>%
select(c('Sample', 'Origin', 'Reference'))
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference'))
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference')) %>%
as.numeric()
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference')) %>%
as.numeric
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference')) %>%
as.numeric()
as.numeric(initial_data_t)
View(initial_data_t)
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference')) %>%
mutate_all(as.numeric())
initial_data_t %>%
select(!c('Sample', 'Origin', 'Reference')) %>%
mutate_all(as.numeric)
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t
as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
initial_data_t[-1,]
as_tibble(initial_data_t[-1,])
initial_data_t <- as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
del
rm
rm(test)
rm(transposed)
?as_tibble
initial_data_t %>%
filter(SiO2 > 50)
initial_data_t %>%
filter(as.numeric(SiO2) > 50)
initial_data_t %>%
filter(as.numeric(SiO2) > 50)
View(initial_data_t)
initial_data_t %>%
filter(as.numeric(Al2O3) > 50)
filter(as.numeric(SiO2) > 50)
initial_data_t %>%
filter(Al2O3 > 50)
initial_data_t %>%
filter(Al2O3 > 50 & `BeO calc.` <= 19)
filter(initial_data_t, Al2O3 > 50 & `BeO calc.` <= 19)
View(initial_data_t)
initial_data_t %>% filter(Origin %in% c('Magmatic leucogranite', 'Contaminated ultrabasic rock'))
View(initial_data_t)
View(initial_data_t)
initial_data_t %>% filter(`BeO calc.` >= 20)
initial_data_t %>% filter(`BeO calc.` >= 20 & is.na(Reference))
initial_data_t %>% filter(`BeO calc.` >= 20 & !is.na(Reference))
?desc
unlink("readme/day_2/readme_cache", recursive = TRUE)
?arrange
initial_data_t %>%
arrange(Origin)
initial_data_t %>%
arrange(`BeO calc.`)
initial_data_t %>%
arrange(desc(`BeO calc.`))
View(initial_data_t)
initial_data_t %>%
arrange(`BeO calc.`, TiO2)
initial_data_t %>%
arrange(desc(`BeO calc.`), TiO2)
initial_data_t %>%
arrange(desc(`BeO calc.`), TiO2, Cr2O3)
initial_data_t %>%
arrange(desc(`BeO calc.`), desc(TiO2), desc(Cr2O3))
initial_data_t %>%
slice(5:10)
initial_data_t %>%
slice_head(2)
initial_data_t %>%
slice_head(n=2)
initial_data_t %>%
slice_max(TiO2)
initial_data_t %>%
select(Sample, TiO2, Cr2O3)
initial_data_t %>%
select(Sample, SiO2:TiO2)
View(initial_data_t)
initial_data_t %>%
select(Sample, SiO2:Cr2O3)
initial_data_t %>%
select(Sample, !TiO2:Cr2O3)
initial_data_t %>%
select(starts_with('Si'))
initial_data_t %>%
select(starts_with('Si', 'Ti'))
initial_data_t %>%
select(starts_with(c('Si', 'Ti')))
?ends_with
View(initial_data_t)
initial_data_t %>%
select(!contains('O'))
?matches
initial_data_t %>%
rename(silica = SiO2, alumina = Al2O3)
View(initial_data_t)
initial_data_t %>%
mutate(si_al = SiO2 / Al2O3)
initial_data_t %>%
mutate(si_al = SiO2/Al2O3)
initial_data_t %>%
mutate(si_al = SiO2)
initial_data_t %>%
mutate(si_al = SiO2) %>%
select(sample, si_al)
initial_data_t %>%
mutate(si_al = SiO2) %>%
select(Sample, si_al)
initial_data_t %>%
mutate(si_al = SiO2/TiO2) %>%
select(Sample, si_al)
?mutate
View(initial_data_t)
initial_data_t %>%
mutate(si_al = `BeO calc.`/TiO2)
last_error()
rlang::last_error()
View(initial_data_t)
initial_data_t %>%
mutate(si_al = as.numeric(`BeO calc.`)/as.numeric(TiO2))
initial_data_t %>%
mutate(si_al = as.numeric(`BeO calc.`)/as.numeric(TiO2)) %>%
select(Sample, si_al)
initial_data_t %>%
mutate(be_to_ti = as.numeric(`BeO calc.`)/as.numeric(TiO2)) %>%
select(Sample, si_al)
initial_data_t %>%
mutate(be_to_ti = as.numeric(`BeO calc.`)/as.numeric(TiO2)) %>%
select(Sample, be_to_ti)
initial_data <-readxl::read_xls('./data/raw_data/Chrysoberyl analysis database.xls')
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
initial_data_t
initial_data_t %>%
select(SiO2:)
initial_data_t %>%
mutate_at(!c('Sample', 'Origin', 'Reference'), as.numeric)
?mutate_at
initial_data_t %>%
mutate_at(~c('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>% mutate_at(~c('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>% mutate_at(c('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>% mutate_at(!c('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>% mutate_at(!matches('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>%
mutate_at(-c('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>%
mutate_at(-vars('Sample', 'Origin', 'Reference'), as.numeric)
initial_data_t %>%
mutate_at(c('-Sample'), as.numeric)
initial_data_t %>%
mutate_at(vae('-Sample'), as.numeric)
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric)
initial_data_t <-
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric)
View(initial_data_t)
initial_data_t %>%
mutate(be_to_ti = as.numeric(`BeO calc.`)/as.numeric(TiO2))
initial_data_t %>%
mutate(be_to_ti = `BeO calc.`/TiO2)
initial_data_t %>%
mutate(be_to_ti = `BeO calc.`/TiO2) %>%
select(Sample, be_to_ti)
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`) %>%
select(Sample, TiO2, ti_to_be)
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`) %>%
select(Sample, TiO2, `BeO calc.`, ti_to_be)
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`) %>%
select(Sample, TiO2, `BeO calc.`, ti_to_be)
??mutate
??dplyr::mutate
?mutate
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`,
ti_to_cr = TiO2/Cr2O3) %>%
select(Sample, TiO2, Cr2O3, `BeO calc.`, ti_to_be, ti_to_cr)
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`,
ti_to_cr = Cr2O3/TiO2) %>%
select(Sample, TiO2, Cr2O3, `BeO calc.`, ti_to_be, ti_to_cr)
initial_data_t %>%
mutate(ti_to_be = TiO2/`BeO calc.`,
cr_to_ti = Cr2O3/TiO2) %>%
select(Sample, TiO2, Cr2O3, `BeO calc.`, ti_to_be, cr_to_ti)
initial_data_t %>%
summarise(silica_min = min(SiO2), min_alumina = min(Al2O3))
?summarise
?min
initial_data_t %>%
summarise(silica_min = min(SiO2, na.rm=TRUE), min_alumina = min(Al2O3, na.rm=TRUE))
?replace
View(initial_data_t)
initial_data_t %>%
group_by(Origin) %>%
mutate(ti_to_be = TiO2/`BeO calc.`) %>%
select(Sample, TiO2, `BeO calc.`, ti_to_be)
initial_data_t %>%
group_by(Origin) %>%
summarise(silica_min = min(SiO2, na.rm=TRUE), min_alumina = min(Al2O3, na.rm=TRUE))
initial_data_t %>%
group_by(Origin) %>%
summarise(silica_min = min(SiO2, na.rm=TRUE))
initial_data_t %>%
group_by(Origin) %>%
summarise(silica_min = min(SiO2))
initial_data_t %>%
group_by(Origin) %>%
summarise(silica_min = mean(SiO2))
initial_data_t %>%
group_by(Origin) %>%
summarise(silica_min = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
mutate(silica_min = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
mutate(mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
mutate(silica_min = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
mutate(silica_min = mean(`BeO calc.`))
initial_data_t %>%
summarise(be_o_mean = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`))
# Be minerals
initial_data <- readxl::read_xls('./data/raw_data/Chrysoberyl analysis database.xls')
library(readr)
library(tidyr)
library(knitr)
initial_data <-readxl::read_xls('./data/raw_data/Chrysoberyl analysis database.xls')
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
initial_data_t <-
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric)
library(dplyr)
initial_data_t <-
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric)
initial_data_t %>%
summarise(be_o_mean = mean(`BeO calc.`))
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`))
View(initial_data_t)
knitr::opts_chunk$set(echo = TRUE)
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`), feo_mean = mean(FeO), cr2o3_mean = mean(Cr2O3), tio2_mean = mean(TiO2))
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`), feo_mean = mean(FeO), cr2o3_mean = mean(Cr2O3), tio2_mean = mean(TiO2))
View(initial_data_t)
?summarise
?summarise
initial_data_t %>%
group_by(Origin) %>%
summarise(be_o_mean = mean(`BeO calc.`), feo_mean = mean(FeO), cr2o3_mean = mean(Cr2O3, na.rm=TRUE), tio2_mean = mean(TiO2))
initial_data_t %>%
group_by(Origin) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
View(initial_data_t)
initial_data_t %>%
group_by(TiO2, breaks=c(0, 0.2, 0.3)) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
initial_data_t %>%
group_by(ti = TiO2, breaks=c(0, 0.2, 0.3)) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
View(initial_data_t)
initial_data_t %>%
mutate(Ti_group = if)
initial_data_t %>%
mutate(Ti_group = if_else(TiO2 > 0.2, 'low', 'high'))
initial_data_t %>%
mutate(Ti_group = if_else(TiO2 > 0.2, 'low', 'high')) %>%
group_by(Ti_group) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
initial_data_t %>%
mutate(Ti_group = if_else(TiO2 > 0.3, 'low', 'high')) %>%
group_by(Ti_group) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
initial_data_t %>%
mutate(Ti_group = if_else(TiO2 > 1, 'high', 'low')) %>%
group_by(Ti_group) %>%
summarise(`BeO mean` = mean(`BeO calc.`, na.rm=TRUE),
`FeO mean` = mean(FeO, na.rm=TRUE),
`Cr2O3 mean` = mean(Cr2O3, na.rm=TRUE),
`TiO2 mean` = mean(TiO2, na.rm=TRUE)
)
?mutate
library(ggplot2)
ggplot(initial_data_t, aes(`BeO calc.`, TiO2, colour = Origin)) +
geom_point()
?geom_point
ggplot(data = initial_data_t) %>%
geom_point(mapping = aes(`BeO calc.`, TiO2))
ggplot(data = initial_data_t) %>%
geom_point(mapping = aes(x = `BeO calc.`, y = TiO2))
initial_data_t
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = `BeO calc.`, y = TiO2))
ggplot(data = initial_data_t)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3))
View(initial_data_t)
View(initial_data_t)
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), replace(0, NA))
?mutate_at
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), funs=function(x){ return x })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), funs=function(x){  x })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){  x })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, 0, NA) })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, 0, NA) })
replace(0, 0, NA)
replace(0, 0, NA)
?replace
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, x<=0, NA) })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, x<0, NA) })
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, x<=0, NA) })
initial_data <-readxl::read_xls('./data/raw_data/Chrysoberyl analysis database.xls')
initial_data_t <- t(initial_data)
colnames(initial_data_t) <- initial_data_t[1,]
initial_data_t <- as_tibble(cbind(Sample = names(initial_data)[-1], initial_data_t[-1,]))
initial_data_t <-
initial_data_t %>%
mutate_at(vars(-Sample, -Origin, -Reference), as.numeric) %>%
mutate_at(vars(-Sample, -Origin, -Reference), .funs=function(x){ replace(x, x<=0, NA) })
View(initial_data_t)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3, color='blue'))
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue')
?geom_point
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=20)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=10)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=1)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=2)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=3)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3)) +
geom_point(colour = "red", size = 3)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', size=2)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', fill='white', size=2, stroke=1)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), color='blue', fill='white', size=5, stroke=1)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), shape=21, color='blue', fill='white', size=5, stroke=1)
ggplot(data = initial_data_t) +
geom_point(mapping = aes(x = TiO2, y = Cr2O3), shape=21, color='blue', fill='white', size=2, stroke=1)
